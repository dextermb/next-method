"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),http=require("http"),isResponse=function(a){return a instanceof http.ServerResponse};module.exports={_handlers:{},_add:function _add(a,b){var c=this._handlers[a];return(Array.isArray(c)||(c=this._handlers[a]=[]),Array.isArray(b))?void(this._handlers[a]=[].concat(c,b)):(this._handlers[a].push(b),this)},use:function use(a){return this._add("*",a)},get:function get(a){return this._add("get",a)},post:function post(a){return this._add("post",a)},patch:function patch(a){return this._add("patch",a)},put:function put(a){return this._add("put",a)},delete:function _delete(a){return this._add("delete",a)},end:function end(){var a=this;return/*#__PURE__*/function(){var b=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function b(c,d){var e,f,g,h,j,k,l;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(e=c.method.toLowerCase(),!Array.isArray(a._handlers[e])){b.next=17;break}f=a._handlers["*"],g=[].concat(f,a._handlers[e]),h=0;case 5:if(!(h<g.length)){b.next=16;break}if(j=g[h],"function"!=typeof j){b.next=13;break}return b.next=10,j(c,d);case 10:if(k=b.sent,!isResponse(k)){b.next=13;break}return b.abrupt("return");case 13:h++,b.next=5;break;case 16:return b.abrupt("return");case 17:throw l=Error("Missing handlers for '".concat(e,"' method")),l.method=e,l.req=c,l.res=d,l;case 22:case"end":return b.stop();}},b)}));return function(){return b.apply(this,arguments)}}()}};