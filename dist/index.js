"use strict";function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}var http=require("http"),isResponse=function(a){return a instanceof http.ServerResponse};module.exports=function(a,b){var c=this;return this._handlers={},this._add=function(a,b){var d=c._handlers[a];return(Array.isArray(d)||(d=c._handlers[a]=[]),Array.isArray(b))?void(c._handlers[a]=[].concat(d,b)):(c._handlers[a].push(b),c)},this.use=function(a){return c._add("*",a)},this.get=function(a){return c._add("get",a)},this.post=function(a){return c._add("post",a)},this.patch=function(a){return c._add("patch",a)},this.put=function(a){return c._add("put",a)},this["delete"]=function(a){return c._add("delete",a)},this.end=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function d(){var e,f,g,h,j,k;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(e=a.method.toLowerCase(),!Array.isArray(c._handlers[e])){d.next=15;break}f=c._handlers["*"],g=[].concat(f,c._handlers[e]),h=0;case 5:if(!(h<g.length)){d.next=14;break}return d.next=8,g[h](a,b);case 8:if(j=d.sent,!isResponse(j)){d.next=11;break}return d.abrupt("return");case 11:h++,d.next=5;break;case 14:return d.abrupt("return");case 15:throw k=Error("Missing handlers for '".concat(e,"' method")),k.method=e,k.req=a,k.res=b,k;case 20:case"end":return d.stop();}},d)})),this};